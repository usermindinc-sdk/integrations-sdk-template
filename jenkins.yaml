# This file is completely arbitrary YAML that you might (or might not) want to use
# See an example of how it's used here:
#   1. Loading build configuration (defaults to looking in 'config/jenkins.yaml'
#      --> https://github.com/usermindinc/skylab/blob/5d74db89d4f3cb09c11800cbcc3d98229574b4a6/Jenkinsfile#L11
#
#   2. Using build configuration parameters:
#      --> https://github.com/usermindinc/skylab/blob/5d74db89d4f3cb09c11800cbcc3d98229574b4a6/Jenkinsfile#L28-L29
#
---
  # Default settings shared for all builds (unless directly overridden)
  common: &common
    autoDeploy:         false
    requireApproval:    true # whether to require user input for deployments
    pushDockerImage:    false
    javaVersion:        'oraclejdk8'
    mavenVersion:       'Maven_3.5.2'
    kubeCluster:        'staging'
    kubeDeploymentFile: 'kubernetes/deployment-staging.yaml'
  default: # this block gets used if no branch-specific one is supplied
    << : *common # this pulls in everything from 'common'

  staging: # Configuration for master branch
    << : *common # this pulls in everything from 'common'
    pushDockerImage:    true
    autoDeploy:         true
    requireApproval:    false
    deploymentSlackRoom: staging

  master:  # Configuration for master branch
    << : *common # this pulls in everything from 'common'
    pushDockerImage:    true
    autoDeploy:         true
    requireApproval:    false
    kubeDeploymentFile: 'kubernetes/deployment-prod.yaml'
    kubeCluster:        'production'
    deploymentSlackRoom: deploy-prod

